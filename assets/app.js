"use strict";angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(e){e.$on("login",function(t,n){e.currentUser=n})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(e,o){e.login=function(t,n){o.login(t,n).then(function(t){e.$emit("login",t)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(n,t){t.fetch().success(function(t){n.posts=t}),n.addPost=function(){n.postBody&&t.create({username:"dickeyxxx",body:n.postBody}).success(function(t){n.posts.unshift(t),n.postBody=null})}}]),angular.module("app").service("PostsSvc",["$http",function(n){this.fetch=function(){return n.get("/api/posts")},this.create=function(t){return n.post("/api/posts",t)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(e,o){e.register=function(t,n){o.register(t,n).then(function(t){e.$emit("login",t)})}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"})}]),angular.module("app").service("UserSvc",["$http",function(e){var o=this;o.getUser=function(){return e.get("/api/users").then(function(t){return t.data})},o.login=function(t,n){return e.post("/api/sessions",{username:t,password:n}).then(function(t){return o.token=t.data,e.defaults.headers.common["X-Auth"]=t.data,o.getUser()})},console.info("svc",o)}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRvbiIsIl8iLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJVc2VyU3ZjIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsIiRlbWl0IiwiUG9zdHNTdmMiLCJmZXRjaCIsInN1Y2Nlc3MiLCJwb3N0cyIsImFkZFBvc3QiLCJwb3N0Qm9keSIsImNyZWF0ZSIsImJvZHkiLCJwb3N0IiwidW5zaGlmdCIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJnZXQiLCJyZWdpc3RlciIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwic3ZjIiwiZ2V0VXNlciIsInJlc3BvbnNlIiwiZGF0YSIsInRva2VuIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiY29uc29sZSIsImluZm8iXSwibWFwcGluZ3MiOiJhQUNBQSxRQUFBQyxPQUFBLE1BQUEsQ0FBQSxZQ0RBRCxRQUNBQyxPQUFBLE9BQ0FDLFdBQUEsa0JBQUEsQ0FBQSxTQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLElBQUEsUUFBQSxTQUFBQyxFQUFBQyxHQUNBSCxFQUFBSSxZQUFBRCxPQ0pBTixRQUNBQyxPQUFBLE9BQ0FDLFdBQUEsWUFBQSxDQUFBLFNBQUEsVUFBQSxTQUFBQyxFQUFBSyxHQUNBTCxFQUFBTSxNQUFBLFNBQUFDLEVBQUFDLEdBQ0FILEVBQ0FDLE1BQUFDLEVBQUFDLEdBQ0FDLEtBQUEsU0FBQU4sR0FDQUgsRUFBQVUsTUFBQSxRQUFBUCxTQ1BBTixRQUNBQyxPQUFBLE9BQ0FDLFdBQUEsWUFBQSxDQUFBLFNBQUEsV0FBQSxTQUFBQyxFQUFBVyxHQUNBQSxFQUNBQyxRQUNBQyxRQUFBLFNBQUFDLEdBQ0FkLEVBQUFjLE1BQUFBLElBR0FkLEVBQUFlLFFBQUEsV0FDQWYsRUFBQWdCLFVBQ0FMLEVBQ0FNLE9BQUEsQ0FDQVYsU0FBQSxZQUNBVyxLQUFBbEIsRUFBQWdCLFdBRUFILFFBQUEsU0FBQU0sR0FDQW5CLEVBQUFjLE1BQUFNLFFBQUFELEdBQ0FuQixFQUFBZ0IsU0FBQSxXQ2xCQW5CLFFBQ0FDLE9BQUEsT0FDQXVCLFFBQUEsV0FBQSxDQUFBLFFBQUEsU0FBQUMsR0FDQUMsS0FBQVgsTUFBQSxXQUNBLE9BQUFVLEVBQUFFLElBQUEsZUFFQUQsS0FBQU4sT0FBQSxTQUFBRSxHQUNBLE9BQUFHLEVBQUFILEtBQUEsYUFBQUEsT0NQQXRCLFFBQ0FDLE9BQUEsT0FDQUMsV0FBQSxlQUFBLENBQUEsU0FBQSxVQUFBLFNBQUFDLEVBQUFLLEdBQ0FMLEVBQUF5QixTQUFBLFNBQUFsQixFQUFBQyxHQUNBSCxFQUNBb0IsU0FBQWxCLEVBQUFDLEdBQ0FDLEtBQUEsU0FBQU4sR0FDQUgsRUFBQVUsTUFBQSxRQUFBUCxTQ1BBTixRQUNBQyxPQUFBLE9BQ0E0QixPQUFBLENBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFDQUMsS0FBQSxJQUFBLENBQUE3QixXQUFBLFlBQUE4QixZQUFBLGVBQ0FELEtBQUEsWUFBQSxDQUFBN0IsV0FBQSxlQUFBOEIsWUFBQSxrQkFDQUQsS0FBQSxTQUFBLENBQUE3QixXQUFBLFlBQUE4QixZQUFBLGtCQ05BaEMsUUFDQUMsT0FBQSxPQUNBdUIsUUFBQSxVQUFBLENBQUEsUUFBQSxTQUFBQyxHQUNBLElBQUFRLEVBQUFQLEtBRUFPLEVBQUFDLFFBQUEsV0FDQSxPQUFBVCxFQUNBRSxJQUFBLGNBQ0FmLEtBQUEsU0FBQXVCLEdBQ0EsT0FBQUEsRUFBQUMsUUFJQUgsRUFBQXhCLE1BQUEsU0FBQUMsRUFBQUMsR0FDQSxPQUFBYyxFQUNBSCxLQUFBLGdCQUFBLENBQUFaLFNBQUFBLEVBQUFDLFNBQUFBLElBQ0FDLEtBQUEsU0FBQXVCLEdBR0EsT0FGQUYsRUFBQUksTUFBQUYsRUFBQUMsS0FDQVgsRUFBQWEsU0FBQUMsUUFBQUMsT0FBQSxVQUFBTCxFQUFBQyxLQUNBSCxFQUFBQyxhQUtBTyxRQUFBQyxLQUFBLE1BQUFUIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmFuZ3VsYXIubW9kdWxlKCAnYXBwJywgWyduZ1JvdXRlJ10pO1xuIiwiYW5ndWxhclxuICAubW9kdWxlKCAnYXBwJyApXG4gIC5jb250cm9sbGVyKCAnQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oICRzY29wZSApIHtcbiAgICAkc2NvcGUuJG9uKCAnbG9naW4nLCBmdW5jdGlvbiggXywgdXNlciApIHtcbiAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXI7XG4gICAgfSk7XG4gIH0pXG47XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoICdhcHAnIClcbiAgLmNvbnRyb2xsZXIoICdMb2dpbkN0cmwnLCBmdW5jdGlvbiggJHNjb3BlLCBVc2VyU3ZjICkge1xuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCB1c2VybmFtZSwgcGFzc3dvcmQgKSB7XG4gICAgICBVc2VyU3ZjXG4gICAgICAgIC5sb2dpbiggdXNlcm5hbWUsIHBhc3N3b3JkIClcbiAgICAgICAgLnRoZW4oIGZ1bmN0aW9uKCB1c2VyICkge1xuICAgICAgICAgICRzY29wZS4kZW1pdCggJ2xvZ2luJywgdXNlciApO1xuICAgICAgICB9KVxuICAgICAgO1xuICAgIH1cbiAgfSlcbjtcbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSggJ2FwcCcgKVxuICAuY29udHJvbGxlciggJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uKCAkc2NvcGUsIFBvc3RzU3ZjICkge1xuICAgIFBvc3RzU3ZjXG4gICAgICAuZmV0Y2goKVxuICAgICAgLnN1Y2Nlc3MoIGZ1bmN0aW9uKCBwb3N0cyApIHtcbiAgICAgICAgJHNjb3BlLnBvc3RzID0gcG9zdHM7XG4gICAgICB9KVxuICAgIDtcbiAgICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCAkc2NvcGUucG9zdEJvZHkgKSB7XG4gICAgICAgIFBvc3RzU3ZjXG4gICAgICAgICAgLmNyZWF0ZSh7XG4gICAgICAgICAgICB1c2VybmFtZTogJ2RpY2tleXh4eCcsXG4gICAgICAgICAgICBib2R5OiAkc2NvcGUucG9zdEJvZHlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zdWNjZXNzKCBmdW5jdGlvbiggcG9zdCApIHtcbiAgICAgICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KCBwb3N0ICk7XG4gICAgICAgICAgICAkc2NvcGUucG9zdEJvZHkgPSBudWxsO1xuICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuOyIsImFuZ3VsYXJcbiAgLm1vZHVsZSggJ2FwcCcgKVxuICAuc2VydmljZSggJ1Bvc3RzU3ZjJywgZnVuY3Rpb24oICRodHRwICkge1xuICAgIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoICcvYXBpL3Bvc3RzJyApO1xuICAgIH07XG4gICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbiggcG9zdCApIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCAnL2FwaS9wb3N0cycsIHBvc3QgKTtcbiAgICB9O1xuICB9KVxuOyIsImFuZ3VsYXJcbiAgLm1vZHVsZSggJ2FwcCcgKVxuICAuY29udHJvbGxlciggJ1JlZ2lzdGVyQ3RybCcsIGZ1bmN0aW9uKCAkc2NvcGUsIFVzZXJTdmMgKSB7XG4gICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24oIHVzZXJuYW1lLCBwYXNzd29yZCApIHtcbiAgICAgIFVzZXJTdmNcbiAgICAgICAgLnJlZ2lzdGVyKCB1c2VybmFtZSwgcGFzc3dvcmQgKVxuICAgICAgICAudGhlbiggZnVuY3Rpb24gKCB1c2VyICkge1xuICAgICAgICAgICRzY29wZS4kZW1pdCggJ2xvZ2luJywgdXNlciApO1xuICAgICAgICB9KVxuICAgICAgO1xuICAgIH07XG4gIH0pXG47IiwiYW5ndWxhclxuICAubW9kdWxlKCAnYXBwJyApXG4gIC5jb25maWcoIGZ1bmN0aW9uKCAkcm91dGVQcm92aWRlciApIHtcbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgLndoZW4oICcvJywgeyBjb250cm9sbGVyOiAnUG9zdHNDdHJsJywgdGVtcGxhdGVVcmw6ICdwb3N0cy5odG1sJyB9KVxuICAgICAgLndoZW4oICcvcmVnaXN0ZXInLCB7IGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLCB0ZW1wbGF0ZVVybDogJ3JlZ2lzdGVyLmh0bWwnIH0pXG4gICAgICAud2hlbiggJy9sb2dpbicsIHsgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsIHRlbXBsYXRlVXJsOiAnbG9naW4uaHRtbCcgfSlcbiAgICA7XG4gIH0pXG47IiwiYW5ndWxhclxuICAubW9kdWxlKCAnYXBwJyApXG4gIC5zZXJ2aWNlKCAnVXNlclN2YycsIGZ1bmN0aW9uKCAkaHR0cCApIHtcbiAgICB2YXIgc3ZjID0gdGhpcztcblxuICAgIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgLmdldCggJy9hcGkvdXNlcnMnIClcbiAgICAgICAgLnRoZW4oIGZ1bmN0aW9uKCByZXNwb25zZSApIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSlcbiAgICAgIDtcbiAgICB9O1xuICAgIHN2Yy5sb2dpbiA9IGZ1bmN0aW9uKCB1c2VybmFtZSwgcGFzc3dvcmQgKSB7XG4gICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgLnBvc3QoICcvYXBpL3Nlc3Npb25zJywgeyB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZCB9KVxuICAgICAgICAudGhlbiggZnVuY3Rpb24oIHJlc3BvbnNlICkge1xuICAgICAgICAgIHN2Yy50b2tlbiA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICByZXR1cm4gc3ZjLmdldFVzZXIoKTtcbiAgICAgICAgfSlcbiAgICAgIDtcbiAgICB9O1xuXG4gICAgY29uc29sZS5pbmZvKCAnc3ZjJywgc3ZjICk7XG5cbiAgICAvKlxuICAgIHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRodHRwXG4gICAgICAgIC5nZXQoICcvYXBpL3VzZXJzJywge1xuICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtQVVUSCc6IHRoaXMudG9rZW4gfVxuICAgICAgICB9KVxuICAgICAgO1xuICAgIH07XG4gICAgdGhpcy5sb2dpbiA9IGZ1bmN0aW9uKCB1c2VybmFtZSwgcGFzc3dvcmQgKSB7XG4gICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgLnBvc3QoICcvYXBpL3Nlc3Npb25zJywge1xuICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oIGZ1bmN0aW9uKCB2YWwgKSB7XG4gICAgICAgICAgdGhpcy50b2tlbiA9IHZhbC5kYXRhO1xuICAgICAgICAgIHJldHVybiB0aGlzLmdldFVzZXIoKTtcbiAgICAgICAgfSlcbiAgICAgIDtcbiAgICB9O1xuICAgICovXG5cbiAgfSlcbjtcbiJdfQ==
